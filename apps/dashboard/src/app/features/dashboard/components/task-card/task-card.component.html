<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow">
  <div class="flex items-start justify-between">
    <div class="flex-1">
      <div class="flex items-center gap-2 mb-2">
        <span class="px-2 py-1 text-xs font-medium rounded-full {{ getCategoryColor(task.category) }}">
          {{ task.category }}
        </span>
        <span class="w-2 h-2 rounded-full {{ getPriorityColor(task.priority) }}" title="Priority: {{ task.priority }}"></span>
      </div>
      <h3 class="text-lg font-medium text-gray-900">{{ task.title }}</h3>
      @if (task.description) {
        <p class="mt-1 text-sm text-gray-500">{{ task.description }}</p>
      }
      <div class="mt-2 flex items-center gap-4 text-xs text-gray-400">
        @if (task.dueDate) {
          <span>Due: {{ task.dueDate | date:'shortDate' }}</span>
        }
        @if (task.assignedTo) {
          <span>Assigned to: {{ task.assignedTo.firstName }} {{ task.assignedTo.lastName }}</span>
        }
      </div>
    </div>
  </div>

  <div class="mt-4 flex items-center justify-between">
    <div>
      <label for="status-{{ task.id }}" class="sr-only">Status</label>
      <select
        id="status-{{ task.id }}"
        [value]="task.status"
        (change)="onStatusChange($event)"
        class="text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500"
      >
        @for (status of getStatusOptions(); track status) {
          <option [value]="status" [selected]="status === task.status">{{ status | titlecase }}</option>
        }
      </select>
    </div>
    <div class="flex items-center gap-2">
      <button
        (click)="onEdit()"
        class="px-3 py-1 text-sm font-medium text-indigo-600 hover:text-indigo-800"
      >Edit</button>
      <button
        (click)="onDeleteClick()"
        class="px-3 py-1 text-sm font-medium text-red-600 hover:text-red-800"
      >Delete</button>
    </div>
  </div>
</div>

<app-confirm-modal
  [isOpen]="showDeleteModal"
  title="Delete Task"
  message="Are you sure you want to delete this task? This action cannot be undone."
  confirmText="Delete"
  cancelText="Cancel"
  (confirm)="onDeleteConfirm()"
  (cancel)="onDeleteCancel()"
></app-confirm-modal>
